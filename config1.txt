SIZE 25

NUM_BOOTSTRAP_NODES 4
NUM_TOPICS 1000

# parameters of periodic execution
CYCLES 50*CYCLE
CYCLE 10
ENDTIME CYCLES

# parameters of message transfer
MINDELAY 0
MAXDELAY 1*CYCLE


########################################################### GENERAL SIMULATION SECTION
random.seed 34245324
network.size SIZE
simulation.endtime ENDTIME
simulation.logtime CYCLE
network.node poldercast.util.PolderCastBaseNode
{
    measureTopicSubscriptionLoad true
    measureTopicPublicationLoad false
}

########################################################### PROTOCOLS SECTION
protocol.transportUniformRandom  peersim.transport.UniformRandomTransport
{
    mindelay MINDELAY
    maxdelay MAXDELAY
}

protocol.cyclon poldercast.protocols.CyclonProtocol
{
    transport transportUniformRandom
    step  CYCLE
}
protocol.vicinity poldercast.protocols.VicinityProtocol
{
    transport transportUniformRandom
    step  CYCLE
}
protocol.rings poldercast.protocols.RingsProtocol
{
    transport transportUniformRandom
    step  CYCLE
    maxViewSize 20
    maxGossipLength 10
    fanout 2
}
include.protocol transportUniformRandom cyclon vicinity rings

########################################################### INITIALIZERS SECTION
# this initializer assigns each node an ID
init.poldercastIdAssigner poldercast.initializers.PolderCastIdAssigner

# this adds initial nodes into the cyclon view
init.bootstrapper WireKOut {
    protocol cyclon
    k NUM_BOOTSTRAP_NODES
    undir true
}

init.cycleScheduler CDScheduler {
    # list of cycle protocols separated by whitespace
    protocol cyclon vicinity rings
}

init.subscriptionRelationshipInitializer tests.initializers.SubscriptionRelationshipInitializer {
    numberOfNodes SIZE
    numberOfTopics NUM_TOPICS
}

# the ordered sequence of initializers that must be run
include.init poldercastIdAssigner bootstrapper cycleScheduler

########################################################### CONTROLS SECTION
#control.dyanmicNetwork peersim.dynamics.DynamicNetwork
#control.dyanmicNetwork.add 1

#control.dyanmicNetwork.init.0 RandNI
#control.dyanmicNetwork.init.0.k 1
#control.dyanmicNetwork.init.0.protocol cyclon

#control.dyanmicNetwork.init.1 poldercast.initializers.PolderCastIdAssigner

control.topicSubscription tests.controls.TopicSubscription
{
    step CYCLE
}
control.loadDistribution tests.controls.LoadDistribution
{
    step CYCLE
    protocol rings
}
include.control loadDistribution